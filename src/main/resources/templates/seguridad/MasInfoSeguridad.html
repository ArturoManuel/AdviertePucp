<!DOCTYPE html>
<html lang="en"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head >
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <div  th:replace="fragmentos/newnavbar.html :: cabecera(title='Mas informacion')">

    </div>
    <title th:text="AdviertePucp"></title>
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/b101dc44ce.js" crossorigin="anonymous"></script>
    <!--JQUery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- Google Fonts -->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.0/font/bootstrap-icons.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Titillium+Web:wght@300;400;600&display=swap" rel="stylesheet">
    <!-- MDB -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link rel="stylesheet" th:href="@{/css/mdb.min.css}" />
    <link rel="stylesheet" href="/css/suspendido.css">
</head>
<body style="background-color: #eee;">
<header th:replace="fragmentos/newnavbar.html :: navbar (user=null)">

</header>

<div class="container py-5" >
    <div >
        <span th:text="'Incidencia #'+ ${incidencia.idI}" style="font-size: medium">(Incidencia #001454)</span>
        <h2>Mucho ruido los cachimbos</h2>
        <div class="card-tele-title" style="font-size: medium">
            <span th:text="${incidencia.urgencia}"
                  class="alert alert-primary" role="alert" style="max-width: fit-content;max-height: fit-content;font-size: small;padding: 4px;font-weight: lighter" >
            </span>
            <tr></tr>
            <span th:text="${incidencia.tincidencia}"
                  th:styleappend="';background-color:'+${incidencia.color}" class="alert alert-info" role="alert" style="max-width: fit-content;max-height: fit-content;font-size: small;padding: 4px;font-weight: lighter; margin-left: 3px" >
                Objetos perdidos</span>

        </div>

        <div class="card-tele-subtitle">
            <i class="bi bi-geo-alt" th:text="${incidencia.zonapucp}"></i>
        </div>
        <div class="card-tele-subtitle">
            <span>Estado:</span>
            <span th:text="${incidencia.estado}"
                  style="font-weight: bolder">En proceso</span>
        </div>
        <button th:if="${incidencia.estado == 'registrado'}" type="button" class="btn btn-outline-success bSalir" data-bs-toggle="modal" data-bs-target="#exampleModal">
            Atender
        </button>
        <button th:if="${incidencia.estado == 'atendido'}" type="button" class="btn btn-outline-success bSalir" data-bs-toggle="modal" data-bs-target="#exampleModal4">
            Resolver
        </button>
    </div>
    <br>

    <br>
    <div class="row">

        <div class="col-lg-6">
            <div id="carouselExampleIndicators" class="carousel slide  offset-md-1" data-bs-ride="carousel">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
                </div>
                <div class="carousel-inner " style="height: 250px;width: border-box;">
                    <div class="carousel-item active"  >
                        <img src="https://cdn02.pucp.education/administracion/2019/06/07222954/sistema-bibliotecas-772x432.jpg" alt="Sede"   class="d-block w-100" height="100%" width="100%"/>
                    </div>
                    <div class="carousel-item" >
                        <img src="https://assets.website-files.com/60a6dd60c32dad3ddc38016c/60d9eebe4d2c9cb20f53b218_IMG_9308.jpeg" alt="Sede"  class="d-block w-100" height="100%" width="100%"/>

                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>

        <div class="col-lg-6">
            <div class="card-tele" style="padding: 14px">
                <div class="card-tele-title" style="font-size: large"> Descripción
                </div>
                <div th:text="${incidencia.descripcion}">
                </div>
            </div>

        </div>
    </div>
    <section >
        <div class="container my-5 py-5">

            <div class="row d-flex justify-content-center">
                <div class="col-md-12 col-lg-10">



                    <div class="card text-dark">
                        <div class="card-body p-4">
                            <h4 class="mb-0">Comentarios</h4>
                            <button type="button" class="btn btn-outline-dark bSalir" data-bs-toggle="modal" data-bs-target="#exampleModal3">
                                Comentar
                            </button>
                            <p class="fw-light mb-4 pb-2">(Solo el autor y miembros de seguridad pueden comentar)</p>
                            <div >
                                <input hidden th:value="${incidenciaId}"  name="idincidencia"/>
                                <span hidden th:text="'Incidencia #'+ ${incidenciaId}" style="font-size: medium" >(Incidencia #001454)</span>
                            </div>
                            <div class="d-flex flex-start" th:each="comentario: ${listaComentarios}">
                                <img class="rounded-circle shadow-1-strong me-3"
                                     src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/img%20(23).webp" alt="avatar" width="60"
                                     height="60" />
                                <div>
                                    <h6 class="fw-bold mb-1" th:text=" ${comentario.getNombreusuario}+ '('+${comentario.getUsuario_codigo} + ')'">Lupita Lopez</h6>
                                    <div class="d-flex align-items-center mb-3">
                                        <p class="mb-0">
                                            <span class=" mb-1" th:text="${comentario.getFecha}">Marzo 07, 2021</span>
                                            <span class="badge bg-primary" th:text="${comentario.getRol}">Seguridad</span>
                                        </p>
                                    </div>
                                    <p class="mb-0">
                                        <span class=" mb-1" th:text="${comentario.getNombre}">comentario aqui</span>
                                    </p>
                                    <hr class="my-0" />
                                </div>
                                <hr class="my-0" />
                            </div>

                        </div>

                    </div>
                </div>
            </div>
        </div>

        <br>
        <br>

        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel1" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form method="post" th:action="@{/seguridad/atenderincidencia}">
                        <input hidden th:value="${incidenciaId}"  name="idincidencia"/>
                        <input hidden th:value="${session.usuariolog.getId()}"  name="codigopucp"/>
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel1">Atender incidente</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">

                            <div class="form-floating">
                                <textarea name="comentario" class="form-control" placeholder="Comentario..." id="floatingTextarea1" style="height: 100px"></textarea>
                                <label for="floatingTextarea2">Agregar comentarios</label>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button style="margin-left: 5px"  type="button" class="btn btn-outline-danger bSalir" data-bs-dismiss="modal">Cerrar</button>
                            <button style="margin-left: 5px"  type="submit" class="btn btn-outline-warning bSalir">Poner en proceso</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Modal -->
        <div class="modal fade" id="exampleModal4" tabindex="-1" aria-labelledby="exampleModalLabel1" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form method="post" th:action="@{/seguridad/resolverincidencia}">
                        <input hidden th:value="${incidenciaId}"  name="idincidencia"/>
                        <input hidden th:value="${session.usuariolog.getId()}"  name="codigopucp"/>
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel4">Resolver incidente</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">

                            <div class="form-floating">
                                <textarea name="comentario" class="form-control" placeholder="Comentario..." id="floatingTextarea4" style="height: 100px"></textarea>
                                <label for="floatingTextarea2">Agregar comentarios</label>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button style="margin-left: 5px"  type="button" class="btn btn-outline-danger bSalir" data-bs-dismiss="modal">Cerrar</button>
                            <button style="margin-left: 5px"  type="submit" class="btn btn-outline-success bSalir">Resolver</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Modal -->
        <div class="modal fade" id="exampleModal2" tabindex="-1" aria-labelledby="exampleModalLabel1" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel2">Reportar incidente</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">

                        <div class="form-floating">
                            <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextarea2" style="height: 100px"></textarea>
                            <label for="floatingTextarea2">Agregar comentarios (opcional)</label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button style="margin-left: 5px"  type="button" class="btn btn-outline-danger bSalir" data-bs-dismiss="modal">Cerrar</button>
                        <button style="margin-left: 5px"  type="button" class="btn btn-outline-success bSalir">Guardar</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal -->
        <div class="modal fade" id="exampleModal3" tabindex="-1" aria-labelledby="exampleModalLabel1" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form method="post" th:action="@{/seguridad/agregarcomentario}">
                        <div class="modal-header">

                            <h5 class="modal-title" id="exampleModalLabel3">Agregar comentario</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">

                            <div class="form-floating">
                                <div >
                                    <input hidden th:value="${incidenciaId}"  name="idincidencia"/>
                                    <span hidden th:text="'Incidencia #'+ ${incidenciaId}" style="font-size: medium" >(Incidencia #001454)</span>
                                </div>
                                <div>
                                    <input hidden th:value="${session.usuariolog.getId()}"  name="codigopucp"/>
                                    <span hidden class="text-muted mb-0" th:value="${session.usuariolog.getId()}" th:text="'Codigo: '+ ${session.usuariolog.getId()}" > codigo </span>
                                </div>
                                <div>
                                    <textarea class="form-control" placeholder="Escribe tu comentario aquí" id="floatingTextarea3" style="height: 100px" name="comentario"></textarea>

                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button style="margin-left: 5px"  type="button" class="btn btn-outline-danger bSalir" data-bs-dismiss="modal">Cerrar</button>
                            <button style="margin-left: 5px"  type="submit" class="btn btn-outline-success bSalir" th:href="@{'/seguridad/info'+'?id='+${incidencia.idI}}">Guardar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>




    <div class="card-tele-title" style="font-size: large">Ubicación en el mapa        </div>

    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3475.927032152855!2d-77.08123351933439!3d-12.071278199656282!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9105c96caf9dbcaf%3A0xa729c63564e4353!2sComplejo%20de%20Innovaci%C3%B3n%20Academica%20CIA%20PUCP!5e0!3m2!1ses!2spe!4v1663094644972!5m2!1ses!2spe" width="100%" height="600px" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>

    <!-- Footer -->
    <footer class="sticky-footer bg-white">
        <div class="container my-auto">
            <div class="copyright text-center my-auto">
                <span>Copyright &copy; Advierte PUCP 2022</span>
            </div>
        </div>
    </footer>
    <!-- End of Footer -->
</div>

</body>
</html>